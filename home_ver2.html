<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>박소현 포트폴리오</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body, html {
            font-family: 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #FFDDE1 0%, #B2EBF2 100%);
            color: #495057; 
            overflow: hidden;
            margin: 0;
            padding: 0;
            cursor: url('images/돋보기\ 커서.webp') 12 12, auto;
        }
        #page-container {
            display: flex;
            width: 500vw;
            height: 100vh;
            transition: transform 0.8s cubic-bezier(0.7, 0, 0.3, 1);
        }
        .page-section {
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-shrink: 0;
        }
        #three-canvas-container {
            width: 100%;
            max-width: 400px;
            height: 400px;
            overflow: hidden;
        }
        .animate-on-scroll {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        .animate-on-scroll.is-visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        .card-shadow {
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.05); 
            border-radius: 2rem;
        }
        
        .nav-container {
            position: relative;
            background-color: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 9999px; /* Pill shape */
            padding: 6px;
            box-shadow: 0 8px 25px rgba(245, 168, 178, 0.2); 
            border: 1px solid rgba(255, 255, 255, 0.5);
        }
        .nav-menu {
            display: flex;
            align-items: center;
        }
        .nav-link {
            background: none;
            border: none;
            color: #495057;
            padding: 10px 22px;
            font-size: 1rem;
            font-family: 'Noto Sans KR', sans-serif;
            cursor: pointer;
            transition: color 0.3s ease;
            position: relative;
            z-index: 2;
            font-weight: 500;
        }
        .nav-link.active-nav {
            color: white;
            font-weight: 700;
        }
        .nav-slider {
            position: absolute;
            top: 6px;
            left: 0px; 
            height: calc(100% - 12px);
            background-color: #F5A8B2; 
            border-radius: 9999px;
            z-index: 1;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        #home {
        }

        #web-project-thumbnails, #graphic-work-thumbnails { /* [수정] graphic-work-thumbnails 추가 */
            overflow-y: auto;
        }

        #laptop-container, #graphic-work-viewer-container { /* [수정] graphic-work-viewer-container 추가 */
            position: relative;
            overflow: hidden; 
        }

        /* [수정] #graphic-work-screen-viewport 추가 */
        #laptop-screen-viewport, #graphic-work-screen-viewport { 
            position: absolute; 
            padding: 2.3% 10% 12% 9.2%; 
            top: 0; left: 0;
            width: 100%; 
            
            /* --- [최종 수정] --- */
            height: auto;           /* 1. 높이를 자동으로 설정 (내용물 기준) */
            max-height: 100%;       /* 2. 최대 높이를 100% (프레임)로 제한 */
            overflow-y: auto;       /* 3. 내용이 100%보다 길 때만 스크롤 자동 생성 */
            /* ------------------- */

            border-radius: 42px; 
        }

        #laptop-screen-viewport img, #graphic-work-screen-viewport img { /* [수정] graphic-work-screen-viewport img 추가 */
            width: 100%;
            height: auto; 
            display: block;
        }

        .web-thumbnail-img {
            height: 140px; 
            object-fit: cover;  
            object-position: top;
            filter: grayscale(90%) brightness(0.8);
            opacity: 0.8;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            transform: scale(1);
        }
        
        .thumbnail-wrapper:hover .web-thumbnail-img,
        .thumbnail-wrapper.active-thumbnail .web-thumbnail-img {
            filter: grayscale(0%) brightness(1);
            opacity: 1;
            transform: scale(1.05);
        }

        .thumbnail-wrapper {
            transition: border-color 0.3s ease;
        }
        
        .project-type-badge {
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        .thumbnail-wrapper:hover .project-type-badge,
        .thumbnail-wrapper.active-thumbnail .project-type-badge {
            opacity: 0;
        }

        /* [수정] #graphic-work-screen-viewport 추가 */
        #laptop-screen-viewport::-webkit-scrollbar, #graphic-work-screen-viewport::-webkit-scrollbar {
            display: none;
        }
        #laptop-screen-viewport, #graphic-work-screen-viewport { /* [수정] graphic-work-screen-viewport 추가 */
            -ms-overflow-style: none;
            scrollbar-width: none; 
        }

        .typing-effect::after {
            content: '|';
            margin-left: 0.5rem;
            animation: blink-caret .75s step-end infinite;
        }
        @keyframes blink-caret {
            from, to { opacity: 1; }
            50% { opacity: 0; }
        }
        .typing-effect.typing-done::after {
            animation: none;
            content: ''; 
        }

        #about-content h3, #about-content p {
            transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1), transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .about-content-out {
            opacity: 0;
            transform: translateY(15px);
        }
        
        .cube-btn {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .cube-btn.active-cube-btn {
            background-color: #F5A8B2;
            color: white;
        }
    </style>
</head>
<body class="overflow-hidden">

    <header class="fixed top-6 left-1/2 -translate-x-1/2 z-50">
        <div class="nav-container">
            <div class="nav-slider"></div>
            <nav class="nav-menu">
                <button class="nav-link" data-index="0">Home</button>
                <button class="nav-link" data-index="1">About Me</button>
                <button class="nav-link" data-index="2">Graphic Work</button>
                <button class="nav-link" data-index="3">Web Work</button>
                <button class="nav-link" data-index="4">Contact</button>
            </nav>
        </div>
    </header>
    <main id="page-container">
        <section id="home" class="page-section relative flex-col justify-center items-center text-center p-8 pt-24">
            <h1 id="home-text-h1" class="text-6xl font-extrabold text-[#495057] mb-6 min-h-[72px] md:min-h-[84px]"></h1>
            <p id="home-text-p" class="text-xl text-[#6C757D] opacity-0 min-h-[28px]"></p>

            <div id="scroll-indicator" class="absolute bottom-10 left-1/2 -translate-x-1/2 opacity-0 transition-opacity duration-500 cursor-pointer flex flex-col items-center">
                <p class="text-sm text-gray-600 mb-1">SCROLL</p> <svg class="w-8 h-8 text-gray-600 animate-bounce" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
                </svg>
            </div>
        </section>
        <section id="about" class="page-section flex-col justify-center items-center p-8 pt-24">
            <h2 class="text-4xl font-bold mb-10 text-center animate-on-scroll">About Me</h2>
            <div class="container mx-auto flex flex-col lg:flex-row items-center justify-center gap-12 animate-on-scroll">
                <div id="three-canvas-container" class="cursor-grab active:cursor-grabbing card-shadow bg-white rounded-2xl"></div>
                
                <div class="lg:w-1/2 flex flex-col gap-5">
                    
                    <div id="cube-controls" class="grid grid-cols-6 gap-2 p-4 bg-white card-shadow rounded-2xl">
                    </div>
                    <div id="about-content" class="p-8 bg-white card-shadow min-h-[160px] rounded-2xl">
                        <h3 id="about-title" class="text-2xl font-bold mb-4 text-center text-[#F5A8B2] hidden">큐브를 돌려보세요!</h3>
                        <p id="about-text" class="text-gray-700 text-center">버튼을 클릭하거나 큐브를 돌려 저의 정보를 확인해보세요.</p> 
                    </div>

                </div>
                </div>
        </section>

        <section id="graphic-work" class="page-section flex-col justify-center items-center p-8 pt-24">
            <h2 class="text-4xl font-bold mb-12 text-center animate-on-scroll">Graphic Works</h2>
            <div class="container mx-auto flex flex-col md:flex-row gap-8 items-start justify-center animate-on-scroll">
                <div id="graphic-work-left-column" class="w-full md:w-3/4 flex flex-col items-center gap-8">
                    <div id="graphic-work-viewer-container" class="relative w-full max-w-3xl cursor-pointer card-shadow rounded-2xl">
                        
                        <div id="graphic-work-screen-viewport" class="absolute w-full h-full top-0 left-0">
                            <img id="graphic-work-screen" src="" 
                                alt="Graphic Work Screenshot" class="w-full relative z-10 opacity-100 transition-opacity duration-500">
                        </div>

                        <img src="images/web/맥북.webp" onerror="this.onerror=null;this.src='https://placehold.co/800x600/E9ECEF/495057?text=Frame';" alt="Laptop Frame" class="relative z-10 w-full h-auto pointer-events-none">
                    </div>
                    
                    <div id="graphic-work-description-box" class="w-full max-w-3xl bg-white p-6 card-shadow min-h-[150px] rounded-2xl">
                        <h3 id="graphic-work-title" class="text-2xl font-bold mb-2 text-[#495057]">Graphic Works</h3>
                        <p id="graphic-work-description" class="text-gray-600">오른쪽 목록에서 작품을 선택하세요.</p>
                    </div>
                </div>
                <div class="w-full md:w-1/4">
                    <div id="graphic-work-thumbnails" class="bg-white p-4 card-shadow space-y-4 overflow-y-auto rounded-2xl">
                        </div>
                </div>
            </div>
        </section>
        <section id="web-work" class="page-section flex-col justify-center items-center p-8 pt-24">
            <h2 class="text-4xl font-bold mb-12 text-center animate-on-scroll">Web Works</h2>
            <div class="container mx-auto flex flex-col md:flex-row gap-8 items-start justify-center animate-on-scroll">
                <div id="web-work-left-column" class="w-full md:w-3/4 flex flex-col items-center gap-8">
                    <div id="laptop-container" class="relative w-full max-w-3xl cursor-pointer card-shadow rounded-2xl">
                        
                        <div id="laptop-screen-viewport" class="absolute w-full h-full top-0 left-0">
    </div>

                        <img src="images/web/맥북.webp" onerror="this.onerror=null;this.src='https://placehold.co/800x600/E9ECEF/495057?text=Laptop+Frame';" alt="Laptop Frame" class="relative z-10 w-full h-auto pointer-events-none">
                    </div>
                    
                    <div id="project-description-box" class="w-full max-w-3xl bg-white p-6 card-shadow min-h-[150px] rounded-2xl">
                        <h3 id="project-title" class="text-2xl font-bold mb-2 text-[#495057]">Web Projects</h3>
                        <p id="project-description" class="text-gray-600">오른쪽 목록에서 작품을 선택하세요.</p>
                    </div>
                </div>
                <div class="w-full md:w-1/4">
                    <div id="web-project-thumbnails" class="bg-white p-4 card-shadow space-y-4 overflow-y-auto rounded-2xl">
                        </div>
                </div>
            </div>
        </section>

        <section id="contact" class="page-section flex-col justify-center items-center p-8 pt-24">
            <h2 class="text-4xl font-bold mb-12 text-center animate-on-scroll">Contact Me</h2>
            <div class="container mx-auto bg-white p-10 rounded-3xl card-shadow flex flex-col md:flex-row gap-10 max-w-5xl animate-on-scroll">
                <div class="md:w-1/2">
                    <div class="flex items-center mb-8">
                        <svg class="w-16 h-16 text-[#F5A8B2] mr-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z" /></svg>
                        <div>
                            <h3 class="text-3xl font-bold text-[#495057]">박소현</h3>
                            <p class="text-gray-500">Web Designer</p>
                        </div>
                    </div>
                    <div class="space-y-4 mb-8">
                        <p class="flex items-center text-lg"><svg class="w-6 h-6 mr-3 text-[#F5A8B2]" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75" /></svg>lisianthso@naver.com</p>
                        <p class="flex items-center text-lg"><svg class="w-6 h-6 mr-3 text-[#B2EBF2]" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.213-.992-.55-1.347l-5.25-5.25a.75.75 0 0 0-1.06 0l-2.25 2.25a.75.75 0 0 0 0 1.061l6 6a.75.75 0 0 0 1.06 0l-2.25-2.25a.75.75 0 0 0 0-1.06l-5.25-5.25a.75.75 0 0 0-1.06 0l-2.25 2.25a.75.75 0 0 1-1.06 0Z" /></svg>010-1234-5678</p>
                    </div>
                    <form id="contact-form" class="space-y-4">
                        <input type="text" id="contact-name" placeholder="성함" class="w-full p-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#F5A8B2] focus:outline-none transition-shadow" required>
                        <input type="email" id="contact-email" placeholder="이메일" class="w-full p-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#F5A8B2] focus:outline-none transition-shadow" required>
                        <textarea id="contact-message" rows="4" placeholder="메시지" class="w-full p-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-[#F5A8B2] focus:outline-none transition-shadow" required></textarea>
                        <button type="submit" class="w-full bg-[#F5A8B2] text-white font-bold py-3 px-4 rounded-xl hover:bg-[#E597A1] transition-colors card-shadow">메시지 보내기</button>
                    </form>
                </div>
                <div class="md:w-1/2 bg-[#F8F9FA] p-6 rounded-2xl flex flex-col card-shadow">
                    <h3 class="font-bold text-lg mb-4 text-[#495057]">전송 내용 확인 (Chat Simulation)</h3>
                    <div id="chat-simulation" class="flex-grow space-y-4 overflow-y-auto">
                        <div class="flex justify-start">
                            <div class="bg-gray-300 text-gray-800 p-3 rounded-lg max-w-xs"> 안녕하세요! 궁금한 점이 있어 연락드립니다. </div>
                        </div>
                        <p class="text-center text-sm text-gray-500">메시지를 보내면 이곳에 표시됩니다.</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // ... (상단 스크립트 코드는 변경 없음) ...
            const container = document.getElementById('page-container');
            const navLinks = document.querySelectorAll('.nav-link');
            const navSlider = document.querySelector('.nav-slider');
            const totalPages = 5;
            let currentPageIndex = 0;
            let isScrolling = false;
            let isThreeJsInitialized = false;
            const sectionIds = ['home', 'about', 'graphic-work', 'web-work', 'contact'];

            const homeH1 = document.getElementById('home-text-h1');
            const homeP = document.getElementById('home-text-p');
            const scrollIndicator = document.getElementById('scroll-indicator');
            const textH1 = "고민 없이 바로 이해되는 디자인";
            const textP = "중요한 정보에 집중하여 핵심을 전달합니다.";

            function typeWriter(element, text, speed = 100, callback) {
                let i = 0;
                element.innerHTML = "";
                element.classList.add('typing-effect');
                element.classList.remove('typing-done');

                function typeLoop() {
                    if (i < text.length) {
                        element.innerHTML += text.charAt(i);
                        i++;
                        setTimeout(typeLoop, speed);
                    } else {
                        element.classList.add('typing-done');
                        element.classList.remove('typing-effect'); 
                        if (callback) callback(); 
                    }
                }
                typeLoop();
            }

            function startHomeTyping() {
                if (!homeH1 || !homeP || !scrollIndicator) return;

                homeH1.innerHTML = "";
                homeP.innerHTML = "";
                homeP.style.opacity = 0; 
                scrollIndicator.style.opacity = 0; 
                homeH1.classList.remove('typing-done', 'typing-effect');
                homeP.classList.remove('typing-done', 'typing-effect');
                
                typeWriter(homeH1, textH1, 100, () => {
                    setTimeout(() => {
                        homeP.style.opacity = 1; 
                        typeWriter(homeP, textP, 60, () => {
                            setTimeout(() => {
                                if (scrollIndicator) scrollIndicator.style.opacity = 1;
                            }, 300);
                        });
                    }, 500);
                });
            }

            if (scrollIndicator) {
                scrollIndicator.addEventListener('click', () => {
                    moveToPage(1); 
                });
            }

            let scene, camera, renderer, cube, isDragging = false, previousMousePosition = { x: 0, y: 0 }, isAutoRotating = true;
            let targetRotation = null;
            let snapAndResume = false; 
            let wasAutoRotatingBeforeMouseDown = true;
            
            const aboutData = [
                { title: '소개 (Introduction)', content: '박소현<br>2002.02.08<br>사람을 향한 소통 디자인, 따뜻한 감성으로 <br>사용자의 이야기에 귀 기울여 미소 지을 수 있는 결과물을 만듭니다.', rotation: { x: -Math.PI / 2, y: 0 }, face: 'bottom', img: 'images/web/맥북.webp' },
                { title: '기술 (Skills)', content: 'Adobe Photoshop | Adobe Illustrator | Adobe InDesign | Adobe Premiere Pro | Adobe After Effects | Figma | procreate', rotation: { x: 0, y: Math.PI / 2 }, face: 'left', img: 'images/about me/기술.jpg' },
                { title: '학력 (Education)', content: '2026. 02. 한국폴리텍1대학 서울정수캠퍼스 시각디자인과 졸업 예정', rotation: { x: 0, y: 0 }, face: 'front', img: 'images/about me/학력.jpg' },
                { title: '자격증 (License)', content: '전산회계2급 | 워드프로세서 | ERP 회계/물류/생산 정보관리사 2급 | 미용사(일반)', rotation: { x: 0, y: -Math.PI / 2 }, face: 'right', img: 'images/about me/자격증.jpg' },
                { title: '수상 (Awards)', content: '무한도전뷰티콘테스트 2017 퍼머넌트 장려상', rotation: { x: Math.PI / 2, y: 0 }, face: 'top', img: 'images/about me/수상.jpg' },
                { title: '비전 (Vision)', content: '웹과 그래픽 영역을 아우르며, 어떤 환경에서든 직관적이고 효과적으로 메시지를 전달하는 웹 디자이너로 성장하겠습니다.', rotation: { x: 0, y: Math.PI }, face: 'back', img: 'images/about me/비전.jpg' }
            ];

            function animate() {
                if (!cube || currentPageIndex !== 1) {
                    return;
                }
                
                requestAnimationFrame(animate); 

                if (targetRotation) {
                    isAutoRotating = false; 

                    cube.rotation.x += (targetRotation.x - cube.rotation.x) * 0.1;
                    cube.rotation.y += (targetRotation.y - cube.rotation.y) * 0.1;

                    const diffX = Math.abs(targetRotation.x - cube.rotation.x);
                    const diffY = Math.abs(targetRotation.y - cube.rotation.y);
                    if (diffX < 0.01 && diffY < 0.01) {

                        cube.rotation.x = targetRotation.x;
                        cube.rotation.y = targetRotation.y;
                        targetRotation = null; 
                        
                        if (snapAndResume) {
                            isAutoRotating = true;
                            snapAndResume = false;
                        }
                    }
                } else if (isAutoRotating && !isDragging) {
                    cube.rotation.x += 0.006;
                    cube.rotation.y += 0.006;
                }
                
                if (renderer) {
                    renderer.render(scene, camera);
                }
            }

            function resetCubeAnimation() {
                if (!cube) return; 

                isAutoRotating = false; 
                isDragging = false;
                targetRotation = null; 
                isAutoRotating = true; 
                snapAndResume = false; 

                const aboutTextEl = document.getElementById('about-text');
                const controlsContainer = document.getElementById('cube-controls');

                if (aboutTextEl) {
                    aboutTextEl.textContent = '버튼을 클릭하거나 큐브를 돌려 저의 정보를 확인해보세요.';
                    aboutTextEl.classList.remove('about-content-out');
                }
                if (controlsContainer) {
                    controlsContainer.querySelectorAll('.cube-btn').forEach(btn => {
                        btn.classList.remove('active-cube-btn');
                    });
                }
                animate();
            }

            function handleAnimations(newIndex, oldIndex, isInitialLoad = false) {
                if (oldIndex !== undefined && oldIndex !== -1) {
                    const oldSection = document.getElementById(sectionIds[oldIndex]);
                    if (oldSection) oldSection.querySelectorAll('.animate-on-scroll').forEach(el => el.classList.remove('is-visible'));

                    if (oldIndex === 0 && scrollIndicator) {
                        scrollIndicator.style.opacity = 0;
                    }
                }
                
                const newSection = document.getElementById(sectionIds[newIndex]);
                if (newSection) {
                    const delay = (isInitialLoad || newIndex === oldIndex) ? 0 : 400;
                
                    const animateContent = () => {
                        if (newIndex !== 0) {
                            newSection.querySelectorAll('.animate-on-scroll').forEach(el => el.classList.add('is-visible'));
                        }
                    };
                    
                    if (delay === 0) {
                        animateContent();
                    } else {
                        setTimeout(animateContent, delay);
                    }
                }
                
                const typingDelay = (isInitialLoad || newIndex === oldIndex) ? 0 : 400;
                if (newIndex === 0) {
                    if (typingDelay === 0) {
                        startHomeTyping();
                    } else {
                        setTimeout(startHomeTyping, typingDelay);
                    }
                }
                const cubeDelay = (isInitialLoad || newIndex === oldIndex) ? 0 : 400;
                if (newIndex === 1) {
                    const startCube = () => {
                        if (isThreeJsInitialized) {
                            resetCubeAnimation();
                        }
                    };
                    
                    if (cubeDelay === 0) {
                        startCube();
                    } else {
                        setTimeout(startCube, cubeDelay);
                    }
                }
            }


            function moveToPage(index, isInitialLoad = false) {
                if (index < 0 || index >= totalPages || isNaN(index) || (index === currentPageIndex && !isInitialLoad)) return;
                
                const oldPageIndex = currentPageIndex;
                container.style.transform = `translateX(${-index * 100}vw)`;
                currentPageIndex = index;
                updateNav(currentPageIndex);
                handleAnimations(currentPageIndex, oldPageIndex, isInitialLoad);

                if (window.location.hash !== `#${sectionIds[currentPageIndex]}`) history.replaceState(null, null, `#${sectionIds[currentPageIndex]}`);
                
                if (currentPageIndex === 1 && !isThreeJsInitialized) {
                    initThreeJS();
                    isThreeJsInitialized = true;
                }

                // [수정] 2번(Graphic) 또는 3번(Web) 페이지로 이동 시 높이 조절 함수 호출
                if (currentPageIndex === 2) {
                    setTimeout(setGraphicThumbnailHeight, 50); 
                } else if (currentPageIndex === 3) {
                    setTimeout(setThumbnailHeight, 50); 
                }
            }
            
            function updateNav(activeIndex) {
                let activeBtn = null;
                navLinks.forEach(link => {
                    const linkIndex = parseInt(link.dataset.index, 10);
                    const isActive = linkIndex === activeIndex;
                    link.classList.toggle('active-nav', isActive);
                    if (isActive) {
                        activeBtn = link;
                    }
                });

                if (activeBtn) {
                    navSlider.style.width = `${activeBtn.offsetWidth}px`;
                    navSlider.style.transform = `translateX(${activeBtn.offsetLeft}px)`;
                }
            }
            
            function handleScroll(event) {
                if (isScrolling) {
                    return; 
                }

                isScrolling = true;
                let nextPageIndex = currentPageIndex;
                const isScrollingDown = event.deltaY > 0;

                if (isScrollingDown && currentPageIndex < totalPages - 1) {
                    nextPageIndex++;
                } else if (!isScrollingDown && currentPageIndex > 0) {
                    nextPageIndex--;
                }
                
                if (nextPageIndex !== currentPageIndex) {
                    moveToPage(nextPageIndex);
                }

                setTimeout(() => { isScrolling = false; }, 1000); 
            }

            // [추가] Graphic Work 섹션 스크롤 이벤트 차단
            document.getElementById('graphic-work').addEventListener('wheel', function(event) {
                const isInsideScrollable = event.target.closest('#graphic-work-thumbnails') || event.target.closest('#graphic-work-screen-viewport');
                if (isInsideScrollable) {
                    event.stopPropagation();
                }
            }, { capture: true });

            document.getElementById('web-work').addEventListener('wheel', function(event) {
                const isInsideScrollable = event.target.closest('#web-project-thumbnails') || event.target.closest('#laptop-screen-viewport');
                if (isInsideScrollable) {
                    event.stopPropagation();
                }
            }, { capture: true });


            window.addEventListener('wheel', handleScroll);


            navLinks.forEach(link => {
                link.addEventListener('click', e => {
                    e.preventDefault();
                    const targetIndex = parseInt(link.dataset.index, 10);
                    if (!isNaN(targetIndex)) moveToPage(targetIndex);
                });
            });

            window.addEventListener('hashchange', () => {
                const newHash = window.location.hash.substring(1);
                const newIndex = sectionIds.indexOf(newHash);
                if (newIndex !== -1 && newIndex !== currentPageIndex) moveToPage(newIndex);
            });
            
            function createTextTexture(text) {
                const canvas = document.createElement('canvas');
                const context = canvas.getContext('2d');
                canvas.width = 256; canvas.height = 256;
                context.fillStyle = '#B2EBF2'; 
                context.fillRect(0, 0, 256, 256);
                context.font = 'bold 24px Noto Sans KR'; 
                context.fillStyle = '#495057';
                context.textAlign = 'center'; context.textBaseline = 'middle';
                context.fillText(text.split('(')[0].trim(), 128, 128);
                return new THREE.CanvasTexture(canvas);
            }

            function initThreeJS() {
                const container = document.getElementById('three-canvas-container');
                if (!container || !container.clientWidth) return;

                const raycaster = new THREE.Raycaster();
                const mouse = new THREE.Vector2();

                const aboutTextEl = document.getElementById('about-text');
                const controlsContainer = document.getElementById('cube-controls');
                let isAnimatingAboutContent = false;

                scene = new THREE.Scene();
                camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
                camera.position.z = 5;
                renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true }); 
                renderer.setSize(container.clientWidth, container.clientHeight);
                container.innerHTML = '';
                container.appendChild(renderer.domElement);
                
                const textureLoader = new THREE.TextureLoader();
                
                const materials = [
                    new THREE.MeshBasicMaterial({ 
                        map: (aboutData.find(d => d.face === 'right').img ? textureLoader.load(aboutData.find(d => d.face === 'right').img) : createTextTexture(aboutData.find(d => d.face === 'right').title)), 
                        side: THREE.DoubleSide 
                    }), 
                    new THREE.MeshBasicMaterial({ 
                        map: (aboutData.find(d => d.face === 'left').img ? textureLoader.load(aboutData.find(d => d.face === 'left').img) : createTextTexture(aboutData.find(d => d.face === 'left').title)), 
                        side: THREE.DoubleSide 
                    }),  
                    new THREE.MeshBasicMaterial({ 
                        map: (aboutData.find(d => d.face === 'top').img ? textureLoader.load(aboutData.find(d => d.face === 'top').img) : createTextTexture(aboutData.find(d => d.face === 'top').title)), 
                        side: THREE.DoubleSide 
                    }),   
                    new THREE.MeshBasicMaterial({ 
                        map: (aboutData.find(d => d.face === 'bottom').img ? textureLoader.load(aboutData.find(d => d.face === 'bottom').img) : createTextTexture(aboutData.find(d => d.face === 'bottom').title)), 
                        side: THREE.DoubleSide 
                    }),
                    new THREE.MeshBasicMaterial({ 
                        map: (aboutData.find(d => d.face === 'front').img ? textureLoader.load(aboutData.find(d => d.face === 'front').img) : createTextTexture(aboutData.find(d => d.face === 'front').title)), 
                        side: THREE.DoubleSide 
                    }), 
                    new THREE.MeshBasicMaterial({ 
                        map: (aboutData.find(d => d.face === 'back').img ? textureLoader.load(aboutData.find(d => d.face === 'back').img) : createTextTexture(aboutData.find(d => d.face === 'back').title)), 
                        side: THREE.DoubleSide 
                    }) 
                ];
                
                cube = new THREE.Mesh(new THREE.BoxGeometry(3, 3, 3), materials);
                
                const initialRotation = aboutData[0].rotation;
                cube.rotation.x = initialRotation.x;
                cube.rotation.y = initialRotation.y;
                
                scene.add(cube);

                animate();

                controlsContainer.innerHTML = '';
                aboutData.forEach((item, index) => {
                    const button = document.createElement('button');
                    button.textContent = item.title.split('(')[0].trim();
                    button.dataset.index = index;
                    button.className = 'p-3 bg-[#B2EBF2] text-sm text-[#495057] rounded-xl hover:brightness-90 font-medium transition-all card-shadow cube-btn';
                    controlsContainer.appendChild(button);
                });

                function updateAboutContent(selectedData, clickedButtonEl = null) {
                    if (isAnimatingAboutContent) return;

                    isAnimatingAboutContent = true;

                    controlsContainer.querySelectorAll('.cube-btn').forEach(btn => {
                        btn.classList.remove('active-cube-btn');
                    });

                    if (clickedButtonEl) {
                        clickedButtonEl.classList.add('active-cube-btn');
                    } else {
                        const button = Array.from(controlsContainer.querySelectorAll('.cube-btn')).find(
                            btn => btn.textContent === selectedData.title.split('(')[0].trim()
                        );
                        if (button) button.classList.add('active-cube-btn');
                    }

                    aboutTextEl.classList.add('about-content-out');

                    setTimeout(() => {
                        aboutTextEl.innerHTML = selectedData.content;
                        aboutTextEl.classList.remove('about-content-out');
                        setTimeout(() => {
                            isAnimatingAboutContent = false;
                        }, 300);
                    }, 300);
                }

                controlsContainer.addEventListener('click', (e) => {
                    if (e.target.tagName === 'BUTTON') {
                        if (e.target.classList.contains('active-cube-btn') || isAnimatingAboutContent) return; 
                        
                        const index = parseInt(e.target.dataset.index, 10);
                        const selectedData = aboutData[index];
                        
                        targetRotation = selectedData.rotation;
                        isAutoRotating = false;
                        
                        updateAboutContent(selectedData, e.target); 
                    }
                });

                let mouseMoved = false;
                
                container.addEventListener('mousedown', e => { 
                    isDragging = true; 
                    mouseMoved = false; 
                    targetRotation = null;
                    wasAutoRotatingBeforeMouseDown = isAutoRotating; 
                    isAutoRotating = false;
                    previousMousePosition = { x: e.clientX, y: e.clientY }; 
                });

                container.addEventListener('mousemove', e => {
                    if (isDragging) {
                        mouseMoved = true;
                        const deltaMove = { x: e.clientX - previousMousePosition.x, y: e.clientY - previousMousePosition.y };
                        cube.rotation.x += deltaMove.y * 0.01; cube.rotation.y += deltaMove.x * 0.01;
                        previousMousePosition = { x: e.clientX, y: e.clientY };
                    }
                });

                document.addEventListener('mouseup', () => { 
                    if (!isDragging) return; 
                    isDragging = false; 
                    
                    if (mouseMoved) {
                        const viewVector = new THREE.Vector3(0, 0, 1);
                        let bestFace = null;
                        let maxDot = -Infinity;

                        const faceNormals = [
                            { normal: new THREE.Vector3(1, 0, 0), face: 'right' },
                            { normal: new THREE.Vector3(-1, 0, 0), face: 'left' },
                            { normal: new THREE.Vector3(0, 1, 0), face: 'top' },
                            { normal: new THREE.Vector3(0, -1, 0), face: 'bottom' },
                            { normal: new THREE.Vector3(0, 0, 1), face: 'front' },
                            { normal: new THREE.Vector3(0, 0, -1), face: 'back' }
                        ];

                        faceNormals.forEach(faceInfo => {
                            const worldNormal = faceInfo.normal.clone().applyQuaternion(cube.quaternion);
                            const dot = worldNormal.dot(viewVector);
                            if (dot > maxDot) {
                                maxDot = dot;
                                bestFace = faceInfo.face;
                            }
                        });
                        
                        if (bestFace) {
                            const selectedData = aboutData.find(d => d.face === bestFace);
                            if (selectedData) {
                                targetRotation = selectedData.rotation; 
                                updateAboutContent(selectedData);
                            }
                        }
                        
                    } else {
                    }
                });

                container.addEventListener('click', event => {
                    if (mouseMoved) return; 

                    if (wasAutoRotatingBeforeMouseDown) {
                    
                        const rect = container.getBoundingClientRect();
                        mouse.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;
                        mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;
                        raycaster.setFromCamera(mouse, camera);
                        const intersects = raycaster.intersectObject(cube);

                        let selectedData = null;

                        if (intersects.length > 0) {
                            const faceIndex = intersects[0].face.materialIndex;
                            const faceNameMap = ['right', 'left', 'top', 'bottom', 'front', 'back'];
                            const hitFaceName = faceNameMap[faceIndex];
                            selectedData = aboutData.find(d => d.face === hitFaceName);
                        } else {
                            const viewVector = new THREE.Vector3(0, 0, 1);
                            let bestFace = null;
                            let maxDot = -Infinity;
                            const faceNormals = [
                                { normal: new THREE.Vector3(1, 0, 0), face: 'right' },
                                { normal: new THREE.Vector3(-1, 0, 0), face: 'left' },
                                { normal: new THREE.Vector3(0, 1, 0), face: 'top' },
                                { normal: new THREE.Vector3(0, -1, 0), face: 'bottom' },
                                { normal: new THREE.Vector3(0, 0, 1), face: 'front' },
                                { normal: new THREE.Vector3(0, 0, -1), face: 'back' }
                            ];
                            faceNormals.forEach(faceInfo => {
                                const worldNormal = faceInfo.normal.clone().applyQuaternion(cube.quaternion);
                                const dot = worldNormal.dot(viewVector);
                                if (dot > maxDot) {
                                    maxDot = dot;
                                    bestFace = faceInfo.face;
                                }
                            });
                            if (bestFace) {
                                selectedData = aboutData.find(d => d.face === bestFace);
                            }
                        }
                        
                        if (selectedData) {
                            targetRotation = selectedData.rotation; 
                            updateAboutContent(selectedData);
                        }

                    } else {
                        isAutoRotating = true;
                        targetRotation = null; 
                        
                        if (!isAnimatingAboutContent) {
                            isAnimatingAboutContent = true;
                            aboutTextEl.classList.add('about-content-out');
                            
                            controlsContainer.querySelectorAll('.cube-btn').forEach(btn => {
                                btn.classList.remove('active-cube-btn');
                            });

                            setTimeout(() => {
                                aboutTextEl.textContent = '버튼을 클릭하거나 큐브를 돌려 저의 정보를 확인해보세요.'; 
                                aboutTextEl.classList.remove('about-content-out');
                                setTimeout(() => { isAnimatingAboutContent = false; }, 300);
                            }, 300);
                        }
                    }
                });


                window.addEventListener('resize', () => {
                    if (container.clientWidth > 0 && container.clientHeight > 0) {
                        camera.aspect = container.clientWidth / container.clientHeight;
                        camera.updateProjectionMatrix();
                        renderer.setSize(container.clientWidth, container.clientHeight);
                    }
                }, false);
            }

            // [수정] graphicWorkProjects 배열 형식을 Web Work와 동일하게 변경 (img, thumbnail, type 추가)
            const graphicWorkProjects = [
                { 
                    title: '포스터 디자인', 
                    type: '포스터', 
                    description: '기업 클룹의 \'ZERO SODA\' 음료 제품 촬영 후, 더운 여름 날씨와 바다 배경에 시원함을 나타내는 얼음으로 포스터 디자인 작업을 했습니다.', 
                    img: 'images/graphic/제로소다.webp', 
                    thumbnail: 'images/graphic/제로소다.webp' // 썸네일 이미지 경로 (임시로 메인 이미지와 동일하게 설정)
                },
                { 
                    title: '일러스트레이터', 
                    type: '일러스트', 
                    description: '\'동화\' 아기 돼지 삼형제 장면 중 늑대가 첫째 돼지의 지푸라기 집과 둘째 돼지의 나무 집을 무너트려, 첫째 돼지와 둘째 돼지는 셋째 돼지의 벽돌 집으로 향하는 장면을 일러스트로 제작하였다.', 
                    img: 'images/graphic/아기돼지삼형제.webp', 
                    thumbnail: 'images/graphic/아기돼지삼형제.webp' // 썸네일 이미지 경로 (임시로 메인 이미지와 동일하게 설정)
                },
            ];
            
            // [수정] const webWorkProjects = [ ... ]
            // 서브 페이지 개수를 반영하여 imgs 배열을 수정했습니다.
            const webWorkProjects = [
                { 
                    title: 'Web Work 가이드', 
                    type: '안내', 
                    description: '오른쪽 목록에서 프로젝트를 선택하세요.<br><br><strong>Tip:</strong> 맥북 화면 <strong>스크롤</strong> 시 프로젝트를 미리 볼 수 있으며, <strong>클릭</strong> 시 해당 사이트를 새 창으로 보실 수 있습니다.', 
                    imgs: ['images/web/웹404.jpg'], // 가이드는 1개
                    thumbnail: 'images/web/웹404.jpg',
                    url: '#' // 가이드는 클릭해도 이동 안 하도록 '#'로 설정
                }, 
                { 
                    title: '개인 웹 프로젝트 1: 수원화성', 
                    type: '개인', 
                    description: '조선의 걸작, 수원화성 공식 관광 웹사이트입니다. 정보를 직관적으로 파악하기 어려웠던 수원화성 관련 명소 안내를 이미지를 통해 역사적 가치와 관광 정보를 현대적인 디자인으로 전달합니다.', 
                    imgs: [ 
                        'images/web/웹_수원화성 디자인.webp',     // 1. 메인
                        'images/web/웹_수원화성 디자인 서브1.webp',          // 2. 서브 (총 2개)
                        // TODO: '수원화성_서브1.webp'를 실제 파일명으로 수정하세요.
                    ], 
                    thumbnail: 'images/web/웹_수원화성 디자인.webp', 
                    url: 'https://www.naver.com/' 
                },
                { 
                    title: '개인 웹 프로젝트 2: 카카오프렌즈 리디자인', 
                    type: '개인', 
                    description: '카카오프렌즈 웹사이트를 상품 이미지 대비 작았던 상품명과 가격의 폰트 크기, 상품의 배열 조정으로 가독성을 높였으며, 기존에 없던 캐릭터별 카테고리 구성을 통해 사용자 경험을 개선했습니다. ', 
                    imgs: [
                        'images/web/웹_카카오 메인.webp', // 1. 메인
                        'images/web/웹_카카오 서브1.webp',
                        'images/web/웹_카카오 서브2.webp',
                    ], 
                    thumbnail: 'images/web/웹_카카오 메인.webp', 
                    url: 'https://sohyeon028.github.io/web_kakaofriends/' 
                },
                { 
                    title: '개인 웹 프로젝트 3: 몬스터 에너지', 
                    type: '개인', 
                    description: '브랜드의 익스트림 스포츠 및 관련 콘텐츠 노출을 하여 몬스터 에너지의 브랜드 아이덴티티를 강조했습니다. 제품의 라인업 배치와 제품 안내 페이지를 개선하였으며, 스크롤과 Hover 효과를 통해 브랜드의 인지도 상승 및 긍정적인 인상을 남기도록 리디자인 했습니다.', 
                    imgs: [
                        'images/web/웹_몬스터 에너지.webp', // 1. 메인
                        'images/web/웹_몬스터 서브1.webp',
                        'images/web/웹_몬스터 서브2.webp',      
                        // TODO: '몬스터_서브N.webp' 4개를 실제 파일명으로 수정하세요.
                    ],
                    thumbnail: 'images/web/웹_몬스터 에너지.webp', 
                    url: 'https://sohyeon028.github.io/web_monsterenergy/' 
                },
                { 
                    title: '팀 웹 프로젝트 4: MOA OTT', 
                    type: '팀', 
                    description: 'OTT 플랫폼 \'MOA\'의 웹 디자인입니다. 사용자가 다양한 콘텐츠를 쉽게 탐색하고 즐길 수 있도록 직관적인 UI/UX를 설계했습니다.', 
                    imgs: [
                        'images/web/웹_MOA OTT.webp', // 1. 메인
                        'images/web/웹_MOA OTT 서브1.webp',
                        'images/web/웹_MOA OTT 서브2.webp',
                        'images/web/웹_MOA OTT 서브3.webp',
                        'images/web/웹_MOA OTT 서브4.webp',
                        'images/web/웹_MOA OTT 서브5.webp',
                        'images/web/웹_MOA OTT 서브6.webp',
                    ], 
                    thumbnail: 'images/web/웹_MOA OTT.webp', 
                    url: ' https://sohyeon028.github.io/web_moa/' 
                } 
            ];



            // [삭제] let currentGraphicIndex = 0;
            let currentProjectUrl = '';
            
            // [삭제] 기존 updateGraphicWork 함수 및 관련 오버레이 로직 (prevBtn, nextBtn 리스너 등)
            // ... (관련 코드 블록 전체 삭제됨) ...

            // --- [신규 추가] Graphic Works 섹션 로직 (Web Works 로직 복제 및 수정) ---

            // [추가] Graphic Works 썸네일 컨테이너
            const graphicThumbnailContainer = document.getElementById('graphic-work-thumbnails');
            
            // [추가] Graphic Works 썸네일 생성
            graphicThumbnailContainer.innerHTML = graphicWorkProjects.map((p, i) => `
                <div class="thumbnail-wrapper relative w-full rounded-xl cursor-pointer border-4 overflow-hidden ${i === 0 ? 'border-[#F5A8B2] active-thumbnail' : 'border-transparent hover:border-[#B2EBF2]'}" data-index="${i}">
                    <img src="${p.thumbnail}" alt="${p.title}" class="w-full transition-all web-thumbnail-img">
                    <span class="project-type-badge absolute top-2 left-2 bg-black bg-opacity-60 text-white text-xs font-bold py-1 px-2 rounded-md transition-opacity duration-300">
                        ${p.type}
                    </span>
                </div>
            `).join('');

            // [추가] Graphic Works 뷰어 업데이트 함수
            function updateGraphicProject(index) {
                const project = graphicWorkProjects[index]; if (!project) return;

                const graphicScreen = document.getElementById('graphic-work-screen');

                graphicScreen.src = project.img;
                document.getElementById('graphic-work-title').textContent = project.title;
                document.getElementById('graphic-work-description').innerHTML = project.description;
                // Graphic Works는 외부 URL이 없으므로 currentProjectUrl 업데이트 안 함
                
                const viewport = document.getElementById('graphic-work-screen-viewport');
                if (viewport) {
                    viewport.scrollTop = 0;
                }

                // 썸네일 활성 상태 업데이트
                graphicThumbnailContainer.querySelectorAll('.thumbnail-wrapper').forEach((wrapper, i) => {
                    const isActive = (i === index);
                    wrapper.classList.toggle('border-[#F5A8B2]', isActive);
                    wrapper.classList.toggle('border-transparent', !isActive);
                    wrapper.classList.toggle('active-thumbnail', isActive);
                });
            }

            // [추가] Graphic Works 썸네일 클릭 리스너
            graphicThumbnailContainer.addEventListener('click', e => {
                const wrapper = e.target.closest('.thumbnail-wrapper');
                if (wrapper) {
                    updateGraphicProject(parseInt(wrapper.dataset.index));
                }
            });

            // [추가] Graphic Works 뷰어 클릭 리스너 (현재는 아무 동작 안 함)
            document.getElementById('graphic-work-viewer-container').addEventListener('click', () => { 
                // 그래픽 작업물은 외부 링크가 없으므로 클릭 이벤트를 비워둡니다.
                // 향후 라이트박스(이미지 크게 보기) 기능 추가 가능
            });

            // [추가] Graphic Works 썸네일 높이 조절 함수
            function setGraphicThumbnailHeight() {
                const leftColumn = document.getElementById('graphic-work-left-column');
                const thumbnailsContainer = document.getElementById('graphic-work-thumbnails');
                if (leftColumn && thumbnailsContainer) {
                    const leftColumnHeight = leftColumn.offsetHeight;
                    if (leftColumnHeight > 0) {
                        thumbnailsContainer.style.height = `${leftColumnHeight}px`;
                    }
                }
            }
            
            // --- [신규 추가] Graphic Works 섹션 로직 끝 ---


            // --- [기존] Web Works 섹션 로직 ---
            const thumbnailContainer = document.getElementById('web-project-thumbnails');
            
            thumbnailContainer.innerHTML = webWorkProjects.map((p, i) => `
                <div class="thumbnail-wrapper relative w-full rounded-xl cursor-pointer border-4 overflow-hidden ${i === 0 ? 'border-[#F5A8B2] active-thumbnail' : 'border-transparent hover:border-[#B2EBF2]'}" data-index="${i}">
                    <img src="${p.thumbnail}" alt="${p.title}" class="w-full transition-all web-thumbnail-img">
                    <span class="project-type-badge absolute top-2 left-2 bg-black bg-opacity-60 text-white text-xs font-bold py-1 px-2 rounded-md transition-opacity duration-300">
                        ${p.type}
                    </span>
                </div>
            `).join('');
            
            // [수정] updateWebProject 함수 전체를 아래 코드로 교체하세요.
            // (className을 직접 덮어쓰도록 수정하여 높이 오류 최종 해결)
            function updateWebProject(index) {
                const project = webWorkProjects[index]; if (!project) return;

                const viewport = document.getElementById('laptop-screen-viewport');
                if (!viewport) return;

                // 1. 뷰포트 비우기 및 스크롤 리셋
                viewport.innerHTML = '';
                viewport.scrollTop = 0;

                // 2. 프로젝트 정보 업데이트 (설명, URL 등)
                document.getElementById('project-title').textContent = project.title;
                document.getElementById('project-description').innerHTML = project.description;
                currentProjectUrl = project.url; // 새 창에서 열릴 URL

                // 3. 썸네일 활성 상태 업데이트
                thumbnailContainer.querySelectorAll('.thumbnail-wrapper').forEach((wrapper, i) => {
                    const isActive = (i === index);
                    wrapper.classList.toggle('border-[#F5A8B2]', isActive);
                    wrapper.classList.toggle('border-transparent', !isActive);
                    wrapper.classList.toggle('active-thumbnail', isActive);
                });

                // 4. 이미지 슬라이더 생성
                if (project.imgs && project.imgs.length > 0) {
                    const sliderContainer = document.createElement('div');
                    sliderContainer.className = 'relative w-full h-auto'; 
                    sliderContainer.dataset.currentSlide = '0'; 

                    // 4-1. 이미지들 추가 (공통 클래스 설정)
                    const baseImgClass = 'w-full h-auto transition-opacity duration-300 ease-in-out';

                    project.imgs.forEach((imgSrc, imgIndex) => {
                        const img = document.createElement('img');
                        img.src = imgSrc;
                        img.alt = `${project.title} - 이미지 ${imgIndex + 1}`;
                        
                        if (imgIndex !== 0) {
                            // 2번째 이미지부터는 숨김
                            img.className = `${baseImgClass} opacity-0 absolute top-0 left-0`;
                        } else {
                            // 1번째 이미지만 보이게
                            img.className = `${baseImgClass} opacity-100 relative`;
                        }
                        sliderContainer.appendChild(img);
                    });

                    viewport.appendChild(sliderContainer);

                    // 4-2. 이미지가 2개 이상일 때만 좌우 버튼 추가
                    if (project.imgs.length > 1) {
                        const prevButton = document.createElement('button');
                        prevButton.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" /></svg>`;
                        prevButton.className = 'absolute top-4 left-4 bg-black bg-opacity-30 text-white rounded-full p-2 hover:bg-opacity-50 transition-all z-20 cursor-pointer';

                        const nextButton = document.createElement('button');
                        nextButton.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" /></svg>`;
                        nextButton.className = 'absolute top-4 right-4 bg-black bg-opacity-30 text-white rounded-full p-2 hover:bg-opacity-50 transition-all z-20 cursor-pointer';

                        sliderContainer.appendChild(prevButton);
                        sliderContainer.appendChild(nextButton);

                        let isWheelSliding = false;
                        sliderContainer.addEventListener('wheel', (e) => {
                            e.preventDefault(); 
                            e.stopPropagation(); 
                            if (isWheelSliding) return; 
                            isWheelSliding = true;
                            if (e.deltaY > 0) { updateSlide(1); } else { updateSlide(-1); }
                            setTimeout(() => { isWheelSliding = false; }, 500); 
                        });


                        // 4-3. 버튼 이벤트 리스너 함수
                        // --- [ 여기가 수정되었습니다 ] ---
                        const updateSlide = (direction) => {
                            const images = sliderContainer.querySelectorAll('img');
                            let currentIndex = parseInt(sliderContainer.dataset.currentSlide, 10);
                            
                            let nextIndex = currentIndex + direction;
                            if (nextIndex < 0) { nextIndex = images.length - 1; }
                            else if (nextIndex >= images.length) { nextIndex = 0; }

                            // [수정] 기본 클래스 문자열을 상수로 정의
                            const baseImgClass = 'w-full h-auto transition-opacity duration-300 ease-in-out';

                            images.forEach((img, index) => {
                                if (index === nextIndex) {
                                    // 1. 보여줄 이미지: className을 'relative' 버전으로 덮어쓰기
                                    img.className = `${baseImgClass} opacity-100 relative`;
                                } else {
                                    // 2. 숨길 이미지: className을 'absolute' 버전으로 덮어쓰기
                                    img.className = `${baseImgClass} opacity-0 absolute top-0 left-0`;
                                }
                            });
                            // --- [ 수정 끝 ] ---

                            sliderContainer.dataset.currentSlide = nextIndex; 
                            viewport.scrollTop = 0; 
                        };

                        // 4-4. 버튼 클릭 이벤트 연결
                        prevButton.addEventListener('click', (e) => { e.stopPropagation(); updateSlide(-1); });
                        nextButton.addEventListener('click', (e) => { e.stopPropagation(); updateSlide(1); });
                    }

                } else {
                    viewport.innerHTML = '<p class="text-center p-4">표시할 이미지가 없습니다.</p>';
                }
            }

            thumbnailContainer.addEventListener('click', e => {
                const wrapper = e.target.closest('.thumbnail-wrapper');
                if (wrapper) {
                    updateWebProject(parseInt(wrapper.dataset.index));
                }
            });

            document.getElementById('laptop-container').addEventListener('click', () => { if (currentProjectUrl && currentProjectUrl !== '#') window.open(currentProjectUrl, '_blank'); });

            function setThumbnailHeight() {
                const leftColumn = document.getElementById('web-work-left-column');
                const thumbnailsContainer = document.getElementById('web-project-thumbnails');
                if (leftColumn && thumbnailsContainer) {
                    const leftColumnHeight = leftColumn.offsetHeight;
                    if (leftColumnHeight > 0) {
                        thumbnailsContainer.style.height = `${leftColumnHeight}px`;
                    }
                }
            }
            // --- [기존] Web Works 섹션 로직 끝 ---


            function initializeProjects() {
                // [수정] updateGraphicWork(0) -> updateGraphicProject(0)
                updateGraphicProject(0);
                updateWebProject(0); 
                
                // [수정] 이미지 프리로더가 새 배열 구조(imgs)를 참조하도록 변경
                
                // --- 이 부분을 수정하세요 ---
                // 기존 코드:
                // [...graphicWorkProjects, ...webWorkProjects].flatMap(p => [p.img, p.thumbnail]).filter(Boolean).forEach(src => { (new Image()).src = src; });

                // 새 코드:
                const webImgs = webWorkProjects.flatMap(p => p.imgs || []); // Web: p.imgs 배열을 펼침
                const graphicImgs = graphicWorkProjects.map(p => p.img);    // Graphic: 기존 p.img
                const thumbnails = [...graphicWorkProjects, ...webWorkProjects].map(p => p.thumbnail); // 모든 썸네일
                
                // 중복 제거 및 프리로딩
                const allImages = [...new Set([...webImgs, ...graphicImgs, ...thumbnails])];
                allImages.filter(Boolean).forEach(src => { (new Image()).src = src; });
                // --- 여기까지 수정 ---
            }
            initializeProjects();

            const contactForm = document.getElementById('contact-form');
            contactForm.addEventListener('submit', e => {
                e.preventDefault();
                const chatSim = document.getElementById('chat-simulation');
                const name = document.getElementById('contact-name').value, email = document.getElementById('contact-email').value, message = document.getElementById('contact-message').value;
                if (chatSim.querySelector('p')) chatSim.querySelector('p').remove();
                const sentMessageDiv = document.createElement('div');
                sentMessageDiv.className = 'flex justify-end';
                sentMessageDiv.innerHTML = `<div class="bg-[#F5A8B2] text-white p-3 rounded-xl max-w-xs shadow-md"><p class="font-bold">${name} (${email})</p><p>${message}</p></div>`;
                chatSim.appendChild(sentMessageDiv); chatSim.scrollTop = chatSim.scrollHeight;
                contactForm.reset();
            });


            setTimeout(() => {
                const initialHash = window.location.hash.substring(1);
                const initialIndex = sectionIds.indexOf(initialHash);
                const targetIndex = initialIndex !== -1 ? initialIndex : 0;
                container.style.transition = 'none';
                moveToPage(targetIndex, true);
                setTimeout(() => { container.style.transition = 'transform 0.8s cubic-bezier(0.7, 0, 0.3, 1)'; }, 50);

                setThumbnailHeight();
                setGraphicThumbnailHeight(); // [추가] 그래픽 썸네일 높이 초기 설정
                
                // [수정] 리사이즈 시 두 섹션의 썸네일 높이를 모두 조절
                window.addEventListener('resize', () => {
                    setThumbnailHeight();
                    setGraphicThumbnailHeight();
                });
            }, 100);
        });
    </script>
</body>
</html>